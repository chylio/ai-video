<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 創作指南</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* 引入 Inter 字體 */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF6; /* 柔和的米白色基底 */
            color: #333333; /* 舒適的深灰色文字 */
            position: relative; /* 為偽元素定位提供參考 */
            overflow-x: hidden; /* 防止橫向滾動條 */
        }

        /* 流動線條背景效果 */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                -45deg,
                rgba(173, 216, 230, 0.1), /* Light Blue */
                rgba(144, 238, 144, 0.1), /* Light Green */
                rgba(255, 160, 122, 0.1), /* Light Salmon */
                rgba(255, 255, 255, 0.1) /* White */
            );
            background-size: 400% 400%;
            animation: gradientFlow 20s ease infinite;
            opacity: 0.6; /* 調整透明度以保持舒適感 */
            z-index: -1; /* 確保在內容下方 */
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 頂部導覽列樣式 */
        .top-header {
            background-color: #ffffff; /* 白色背景 */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 50;
            padding: 0.75rem 1.5rem; /* 調整內邊距 */
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .top-header h1 {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 800; /* font-extrabold */
            color: #6A5ACD; /* 柔和的靛藍色 */
            margin-right: 1.5rem; /* 標題與導覽列間距 */
        }

        /* 水平導覽列 (桌面版) / 垂直滑出導覽列 (行動版) */
        .top-nav {
            background-color: #ffffff;
            transition: transform 0.3s ease-in-out;
            /* 行動裝置預設隱藏在左側 */
            transform: translateX(-100%);
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 280px; /* 行動裝置導覽列寬度 */
            padding: 1rem;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            z-index: 40;
            flex-direction: column; /* 行動裝置連結垂直排列 */
            display: none; /* 預設隱藏，由 JS 控制顯示 */
        }
        .top-nav.open {
            transform: translateX(0%); /* 行動裝置展開 */
            display: flex; /* 展開時顯示 */
        }

        /* 導覽連結樣式 */
        .nav-link {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            color: #4B5563; /* 灰色文字 */
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
            text-decoration: none; /* 移除底線 */
            white-space: nowrap; /* 防止文字換行 */
            overflow: hidden; /* 隱藏溢出文字 */
        }
        .nav-link:hover {
            background-color: #E0E7FF; /* 淺靛藍色 */
            color: #6A5ACD; /* 柔和的靛藍色 */
        }
        .nav-link.active {
            background-color: #6A5ACD; /* 啟用連結的靛藍色 */
            color: white;
        }
        .nav-link.active:hover {
            background-color: #6A5ACD; /* 保持啟用顏色 */
            color: white;
        }
        .nav-link i {
            margin-right: 0.75rem;
            flex-shrink: 0; /* 防止圖示縮小 */
        }
        .nav-link span {
            transition: opacity 0.3s ease-in-out;
        }

        /* 行動裝置漢堡選單按鈕 */
        .mobile-menu-toggle {
            background-color: #6A5ACD; /* 柔和的靛藍色 */
            color: white;
            padding: 0.5rem;
            border-radius: 9999px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            display: flex; /* 預設顯示在行動裝置 */
        }
        .mobile-menu-close {
            display: flex;
            background-color: transparent;
            color: #4B5563;
            padding: 0.5rem;
            border-radius: 9999px;
            cursor: pointer;
            align-self: flex-end; /* 在行動導覽列中靠右對齊 */
        }

        /* 桌面版樣式 */
        @media (min-width: 1024px) {
            .top-header {
                justify-content: flex-start; /* 標題靠左對齊 */
                padding: 0.75rem 2rem;
            }
            .top-nav {
                position: relative; /* 桌面版不固定 */
                transform: translateX(0%); /* 桌面版始終可見 */
                flex-direction: row; /* 桌面版連結水平排列 */
                height: auto; /* 自動高度 */
                width: auto; /* 自動寬度 */
                padding: 0; /* 移除內邊距 */
                box-shadow: none; /* 移除陰影 */
                display: flex; /* 始終以 flex row 顯示 */
                flex-grow: 1; /* 允許導覽列佔據可用空間 */
                justify-content: flex-end; /* 連結靠右對齊 */
            }
            .top-nav .nav-link {
                margin-left: 1rem; /* 水平連結間距 */
            }
            .mobile-menu-toggle, .mobile-menu-close {
                display: none !important; /* 桌面版隱藏行動裝置按鈕 */
            }
        }

        /* 主要內容區域的頂部間距，以避免被固定導覽列遮擋 */
        main {
            padding-top: 5rem; /* 根據頂部導覽列的高度調整 */
        }
        @media (min-width: 1024px) {
            main {
                padding-top: 1.5rem; /* 桌面版如果導覽列不佔用垂直空間，可以調整 */
            }
        }

        /* 各內容區塊的樣式 */
        .section-content {
            display: none; /* 預設隱藏所有區塊 */
            background-color: #ffffff;
            padding: 2rem; /* 增加內邊距 */
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem; /* 增加區塊間距 */
            max-width: 900px; /* 固定內容框最大寬度 */
            margin-left: auto; /* 左右自動邊距，實現居中 */
            margin-right: auto;
        }
        .section-content.active {
            display: block; /* 顯示啟用區塊 */
        }
        
        /* 內容標題樣式 */
        .section-content h2 {
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            color: #6A5ACD; /* 柔和的靛藍色 */
            margin-bottom: 2rem; /* 增加標題下方間距 */
            display: flex;
            align-items: center;
        }
        .section-content h3 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #20B2AA; /* 舒適的青綠色 */
            margin-bottom: 1.5rem; /* 增加副標題下方間距 */
        }
        .section-content h4 {
            font-size: 1.25rem; /* text-xl */
            font-weight: 600; /* font-semibold */
            color: #6A5ACD; /* 柔和的靛藍色 */
            margin-bottom: 0.75rem; /* 增加小標題下方間距 */
        }
        .section-content p, .section-content li {
            color: #374151; /* 較深的灰色 */
            line-height: 1.8; /* 增加行高 */
            margin-bottom: 0.75rem; /* 增加段落和列表項間距 */
        }
        .section-content ul {
            list-style-type: disc;
            padding-left: 1.5rem; /* 增加列表縮進 */
        }
        .section-content ol {
            list-style-type: decimal;
            padding-left: 1.5rem; /* 增加列表縮進 */
        }
        .section-content a {
            color: #6A5ACD;
            text-decoration: underline;
        }
        .section-content a:hover {
            color: #8A2BE2; /* 藍紫色 */
        }

        /* Prompt 生成器按鈕樣式 */
        .prompt-button {
            background: linear-gradient(145deg, #6A5ACD, #8A2BE2); /* 靛藍到藍紫色漸變 */
            box-shadow: 5px 5px 15px rgba(106, 90, 205, 0.3), -5px -5px 15px rgba(138, 43, 226, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            color: white;
            font-weight: bold;
            border-radius: 0.75rem;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.125rem;
        }
        .prompt-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: rgba(255, 255, 255, 0.15);
            transition: all 0.75s ease-out;
            transform: translate(-50%, -50%) rotate(45deg);
            opacity: 0;
        }
        .prompt-button:hover::before {
            width: 0;
            height: 0;
            opacity: 1;
        }
        .prompt-button:active {
            transform: translateY(2px);
            box-shadow: 2px 2px 5px rgba(106, 90, 205, 0.2);
        }

        /* 流程圖卡片樣式 */
        .flow-card {
            flex-basis: calc(50% - 1rem); /* 桌面版每行2張卡片 */
            min-width: 180px;
            max-width: 220px;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 1rem; /* 增加卡片內邊距 */
            box-sizing: border-box;
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        .flow-step-number {
            background-color: #6A5ACD; /* 柔和的靛藍色 */
            color: white;
            border-radius: 50%;
            width: 32px; /* 增加數字圓圈大小 */
            height: 32px; /* 增加數字圓圈大小 */
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1rem; /* 增加數字字體大小 */
            margin-bottom: 0.75rem; /* 增加下方間距 */
            flex-shrink: 0;
        }
        .flow-arrow-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin: 1rem 0; /* 增加箭頭垂直間距 */
        }
        .flow-arrow-horizontal, .flow-arrow-vertical {
            color: #8A2BE2; /* 藍紫色 */
            width: 32px;
            height: 32px;
            flex-shrink: 0;
        }
        .flow-arrow-vertical { display: none; }
        .flow-arrow-horizontal { display: block; }

        @media (max-width: 767px) {
            .flow-card { flex-basis: 100%; }
            .flow-arrow-horizontal { display: none; }
            .flow-arrow-vertical { display: block; margin: 1rem 0; }
        }
        @media (min-width: 768px) and (max-width: 1023px) {
            .flow-card { flex-basis: calc(50% - 1.5rem); } /* 調整間距 */
            .flowchart-steps-container { gap: 1.5rem; } /* 調整網格間距 */
        }
        @media (min-width: 1024px) {
            .flow-card { flex-basis: calc(100% / 4 - 1.5rem); } /* 桌面版每行4張卡片，調整間距 */
            .flowchart-steps-container { gap: 1.5rem; } /* 調整網格間距 */
        }

        /* 互動式 Prompt 結構卡片 */
        .prompt-structure-card {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .prompt-structure-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .prompt-structure-card.active-card {
            border-color: #6A5ACD; /* 柔和的靛藍色 */
            background-color: #E0E7FF; /* 淺靛藍色 */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .prompt-structure-card h4 {
            color: #6A5ACD; /* 柔和的靛藍色 */
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .prompt-structure-card p {
            color: #4B5563;
            font-size: 0.95rem;
        }
        .prompt-structure-display {
            background-color: #f9fafb;
            border: 1px solid #d1d5db;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
            min-height: 150px;
        }
        /* 素材一致性卡片樣式 */
        .material-consistency-card {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            padding: 1.25rem; /* 增加內邊距 */
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            text-align: left;
            transition: all 0.2s ease-in-out;
        }
        .material-consistency-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .material-consistency-card h4 {
            color: #6A5ACD; /* 柔和的靛藍色 */
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }
        .material-consistency-card p {
            color: #4B5563;
            font-size: 0.9rem;
        }

        /* 圖片 Prompt Level 按鈕樣式 */
        .prompt-level-button {
            background-color: #E0E7FF; /* 淡紫色 (indigo-100) */
            color: #6A5ACD; /* 柔和的靛藍色 (indigo-600) */
            font-weight: bold;
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            border: none;
        }

        .prompt-level-button:hover {
            background-color: #C7D2FE; /* 稍微深一點的淡紫色 (indigo-200) */
        }

        .prompt-level-button.active-level {
            background-color: #6A5ACD; /* 深紫色 (indigo-600) */
            color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .prompt-level-button.active-level:hover {
            background-color: #5A4AAD; /* 保持深紫色，稍微變深 */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header with horizontal navigation -->
    <header class="top-header">
        <h1 class="text-3xl font-extrabold text-indigo-600">AI 創作指南</h1>
        
        <!-- Mobile hamburger menu toggle -->
        <button id="mobile-menu-toggle" class="mobile-menu-toggle lg:hidden">
            <i data-lucide="menu" class="w-6 h-6"></i>
        </button>

        <!-- Horizontal Navigation (visible on desktop, slides in on mobile) -->
        <nav id="top-navigation" class="top-nav">
            <!-- Close button for mobile nav -->
            <button id="mobile-menu-close" class="mobile-menu-close lg:hidden">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <a href="#welcome" class="nav-link" data-section="welcome">
                <i data-lucide="sparkles"></i>
                <span>歡迎</span>
            </a>
            <a href="#core-applications" class="nav-link" data-section="core-applications">
                <i data-lucide="grid"></i>
                <span>核心應用</span>
            </a>
            <a href="#video-creation-process" class="nav-link" data-section="video-creation-process">
                <i data-lucide="film"></i>
                <span>影片創作流程</span>
            </a>
            <a href="#prompt-structure-techniques" class="nav-link" data-section="prompt-structure-techniques">
                <i data-lucide="type"></i>
                <span>Prompt結構與技巧</span>
            </a>
            <a href="#material-consistency" class="nav-link" data-section="material-consistency">
                <i data-lucide="copy-check"></i>
                <span>素材一致性</span>
            </a>
            <a href="#ai-creation-tools" class="nav-link" data-section="ai-creation-tools">
                <i data-lucide="tool"></i>
                <span>AI創作工具</span>
            </a>
            <a href="#ai-prompt-generator" class="nav-link" data-section="ai-prompt-generator">
                <i data-lucide="wand"></i>
                <span>AI Prompt生成器</span>
            </a>
        </nav>
    </header>

    <!-- Main content area -->
    <main class="flex-1 p-8 overflow-y-auto max-w-screen-xl mx-auto"> <!-- 增加主內容區塊的整體內邊距 -->
        <div id="welcome" class="section-content active bg-white p-8 rounded-xl shadow-lg mb-8"> <!-- 增加區塊內邊距和下方間距 -->
            <h2 class="text-4xl font-bold text-indigo-600 mb-8 flex items-center"> <!-- 增加標題下方間距 -->
                <i data-lucide="sparkles" class="mr-4 w-8 h-8"></i>
                歡迎
            </h2>
            <p class="text-gray-800 text-lg leading-relaxed mb-4"> <!-- 增加行高和段落間距 -->
                AI人工智慧可分為生成式AI與判別式AI。生成式AI能夠產生新內容，理解人類的自然語言描述，並能依據不同需求調整輸出，且能從大量數據中學習創作模式。
            </p>
            <p class="text-gray-800 text-lg leading-relaxed mt-4">
                AI的角色是協助我們更有效率地完成工作。
            </p>
        </div>

        <div id="core-applications" class="section-content bg-white p-8 rounded-xl shadow-lg mb-8"> <!-- 增加區塊內邊距和下方間距 -->
            <h2 class="text-4xl font-bold text-indigo-600 mb-8 flex items-center"> <!-- 增加標題下方間距 -->
                <i data-lucide="grid" class="mr-4 w-8 h-8"></i>
                核心應用
            </h2>
            <p class="text-gray-800 text-lg leading-relaxed mb-8"> <!-- 增加行高和段落間距 -->
                生成式AI的功能與應用廣泛，包含:
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"> <!-- 增加網格間距 -->
                <div class="bg-gray-100 p-6 rounded-lg shadow-md flex flex-col items-center text-center"> <!-- 增加卡片內邊距 -->
                    <h3 class="text-2xl font-semibold text-emerald-600 mb-4 flex items-center"> <!-- 增加副標題下方間距 -->
                        <i data-lucide="file-text" class="mr-2 w-6 h-6"></i>
                        文字生成內容創作
                    </h3>
                    <p class="text-gray-800 text-base leading-relaxed">大幅提升寫作效率，快速生成文章初稿。</p>
                </div>
                <div class="bg-gray-100 p-6 rounded-lg shadow-md flex flex-col items-center text-center">
                    <h3 class="text-2xl font-semibold text-emerald-600 mb-4 flex items-center">
                        <i data-lucide="image" class="mr-2 w-6 h-6"></i>
                        圖像設計與創意產業
                    </h3>
                    <p class="text-gray-800 text-base leading-relaxed">快速產出設計概念，激發創意多樣性。</p>
                </div>
                <div class="bg-gray-100 p-6 rounded-lg shadow-md flex flex-col items-center text-center">
                    <h3 class="text-2xl font-semibold text-emerald-600 mb-4 flex items-center">
                        <i data-lucide="graduation-cap" class="mr-2 w-6 h-6"></i>
                        教育輔助與個性化學習
                    </h3>
                    <p class="text-gray-800 text-base leading-relaxed">提升教材製作效率，提供個性化學習體驗。</p>
                </div>
                <div class="bg-gray-100 p-6 rounded-lg shadow-md flex flex-col items-center text-center">
                    <h3 class="text-2xl font-semibold text-emerald-600 mb-4 flex items-center">
                        <i data-lucide="music" class="mr-2 w-6 h-6"></i>
                        音樂與娛樂創作
                    </h3>
                    <p class="text-gray-800 text-base leading-relaxed">自動生成音樂元素，降低創作門檻。</p>
                </div>
            </div>
            <p class="text-gray-800 text-lg leading-relaxed mt-8"> <!-- 增加頂部間距 -->
                影片可應用於衛教、教學輔助、流程或活動說明、醫院或單位形象介紹。
            </p>
        </div>

        <div id="video-creation-process" class="section-content bg-white p-8 rounded-xl shadow-lg mb-8"> <!-- 增加區塊內邊距和下方間距 -->
            <h2 class="text-4xl font-bold text-indigo-600 mb-8 flex items-center"> <!-- 增加標題下方間距 -->
                <i data-lucide="film" class="mr-4 w-8 h-8"></i>
                影片創作流程
            </h4>
            <h3 class="text-2xl font-semibold text-emerald-600 mb-4">傳統製作與生成式AI製作比較</h3>
            <div class="flex flex-col md:flex-row items-stretch justify-center gap-8 mb-8"> <!-- 增加間距 -->
                <div class="bg-gray-100 p-6 rounded-lg shadow-md flex-1">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2">傳統製作</h4>
                    <p class="text-gray-800 leading-relaxed">需完成腳本、分鏡設計、尋找演員和場地、實地拍攝、後期製作，需要專業團隊，時間和成本較高。</p>
                </div>
                <div class="text-indigo-600 font-bold text-3xl mx-4 my-4 md:my-0 flex items-center justify-center">
                    VS
                </div>
                <div class="bg-gray-100 p-6 rounded-lg shadow-md flex-1">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2">生成式AI製作</h4>
                    <p class="text-gray-800 leading-relaxed">透過自然語言指令協助影片製作。</p>
                </div>
            </div>

            <h3 class="text-2xl font-semibold text-emerald-600 mb-4">AI生成影片流程</h3>
            <div class="flowchart-steps-container flex flex-wrap justify-center items-stretch gap-6"> <!-- 增加網格間距 -->
                <!-- Step 1 -->
                <div class="flow-card bg-gray-100 p-4 rounded-lg shadow-md">
                    <div class="flow-step-number">1</div>
                    <p class="text-gray-800 text-base leading-relaxed">識別主題和需求。</p>
                </div>
                <div class="flow-arrow-container">
                    <i data-lucide="arrow-right" class="flow-arrow-horizontal"></i>
                    <i data-lucide="arrow-down" class="flow-arrow-vertical"></i>
                </div>

                <!-- Step 2 -->
                <div class="flow-card bg-gray-100 p-4 rounded-lg shadow-md">
                    <div class="flow-step-number">2</div>
                    <p class="text-gray-800 text-base leading-relaxed">AI生成腳本和分鏡。</p>
                </div>
                <div class="flow-arrow-container">
                    <i data-lucide="arrow-right" class="flow-arrow-horizontal"></i>
                    <i data-lucide="arrow-down" class="flow-arrow-vertical"></i>
                </div>

                <!-- Step 3 -->
                <div class="flow-card bg-gray-100 p-4 rounded-lg shadow-md">
                    <div class="flow-step-number">3</div>
                    <p class="text-gray-800 text-base leading-relaxed">AI生成視覺內容。</p>
                </div>
                <div class="flow-arrow-container">
                    <i data-lucide="arrow-right" class="flow-arrow-horizontal"></i>
                    <i data-lucide="arrow-down" class="flow-arrow-vertical"></i>
                </div>

                <!-- Step 4 -->
                <div class="flow-card bg-gray-100 p-4 rounded-lg shadow-md">
                    <div class="flow-step-number">4</div>
                    <p class="text-gray-800 text-base leading-relaxed">AI編輯和添加特效。</p>
                </div>
                <div class="flow-arrow-container">
                    <i data-lucide="arrow-right" class="flow-arrow-horizontal"></i>
                    <i data-lucide="arrow-down" class="flow-arrow-vertical"></i>
                </div>

                <!-- Step 5 -->
                <div class="flow-card bg-gray-100 p-4 rounded-lg shadow-md">
                    <div class="flow-step-number">5</div>
                    <p class="text-gray-800 text-base leading-relaxed">AI添加字幕。</p>
                </div>
                <div class="flow-arrow-container">
                    <i data-lucide="arrow-right" class="flow-arrow-horizontal"></i>
                    <i data-lucide="arrow-down" class="flow-arrow-vertical"></i>
                </div>

                <!-- Step 6 -->
                <div class="flow-card bg-gray-100 p-4 rounded-lg shadow-md">
                    <div class="flow-step-number">6</div>
                    <p class="text-gray-800 text-base leading-relaxed">人員調整內容。</p>
                </div>
                <div class="flow-arrow-container">
                    <i data-lucide="arrow-right" class="flow-arrow-horizontal"></i>
                    <i data-lucide="arrow-down" class="flow-arrow-vertical"></i>
                </div>

                <!-- Step 7 (Last step, no arrow after it) -->
                <div class="flow-card bg-gray-100 p-4 rounded-lg shadow-md">
                    <div class="flow-step-number">7</div>
                    <p class="text-gray-800 text-base leading-relaxed">影片完成和發布。</p>
                </div>
            </div>


            <h3 class="text-2xl font-semibold text-emerald-600 mb-4 mt-8">影片三大元素</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6"> <!-- 增加網格間距 -->
                <div class="video-element-card" data-element-type="story-script">
                    <i data-lucide="book" class="w-8 h-8 mb-2 text-indigo-600"></i>
                    <h4>故事 腳本</h4>
                    <p class="text-gray-700 text-sm leading-relaxed">規劃影片內容與台詞，以文字形式呈現劇情與節奏。</p>
                </div>
                <div class="video-element-card" data-element-type="visual-storyboard">
                    <i data-lucide="camera" class="w-8 h-8 mb-2 text-indigo-600"></i>
                    <h4>畫面 分鏡</h4>
                    <p class="text-gray-700 text-sm leading-relaxed">將腳本轉化為視覺畫面，以圖像+文字呈現鏡頭與動作。</p>
                </div>
                <div class="video-element-card" data-element-type="audio-narration">
                    <i data-lucide="mic" class="w-8 h-8 mb-2 text-indigo-600"></i>
                    <h4>聲音 旁白</h4>
                    <p class="text-gray-700 text-sm leading-relaxed">用語音補充說明、引導觀眾，常是畫面外的人講話。</p>
                </div>
            </div>
        </div>

        <div id="prompt-structure-techniques" class="section-content bg-white p-8 rounded-xl shadow-lg mb-8"> <!-- 增加區塊內邊距和下方間距 -->
            <h2 class="text-4xl font-bold text-indigo-600 mb-8 flex items-center"> <!-- 增加標題下方間距 -->
                <i data-lucide="type" class="mr-4 w-8 h-8"></i>
                Prompt結構與技巧
            </h4>
            <h3 class="text-2xl font-semibold text-emerald-600 mb-4">Prompt結構</h3>
            <!-- Interactive Cards for Prompt Structure -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"> <!-- 增加網格間距和下方間距 -->
                <div class="prompt-structure-card active-card" data-prompt-type="video-script">
                    <i data-lucide="film" class="w-8 h-8 mb-2 text-indigo-600"></i>
                    <h4>影片腳本Prompt</h4>
                    <p>定義影片內容、對象、語氣與格式。</p>
                </div>
                <div class="prompt-structure-card" data-prompt-type="image-gen">
                    <i data-lucide="image" class="w-8 h-8 mb-2 text-indigo-600"></i>
                    <h4>分鏡圖像生成Prompt</h4>
                    <p>描述視覺畫面、鏡頭、人物動作與風格。</p>
                </div>
                <div class="prompt-structure-card" data-prompt-type="narration">
                    <i data-lucide="mic" class="w-8 h-8 mb-2 text-indigo-600"></i>
                    <h4>旁白生成Prompt</h4>
                    <p>撰寫語音旁白，搭配畫面內容。</p>
                </div>
            </div>

            <h3 class="text-2xl font-semibold text-emerald-600 mb-4 mt-8">圖片Prompt結構 - 互動式視覺化</h3> <!-- 增加頂部間距 -->
            <div class="bg-gray-100 p-6 rounded-lg shadow-md">
                <div class="flex flex-wrap justify-center gap-4 mb-6">
                    <button class="prompt-level-button py-2 px-4 rounded-lg text-indigo-800 font-bold bg-indigo-100 hover:bg-indigo-200 transition duration-200 active-level" data-level="1">Level 1</button>
                    <button class="prompt-level-button py-2 px-4 rounded-lg text-indigo-800 font-bold bg-indigo-100 hover:bg-indigo-200 transition duration-200" data-level="2">Level 2</button>
                    <button class="prompt-level-button py-2 px-4 rounded-lg text-indigo-800 font-bold bg-indigo-100 hover:bg-indigo-200 transition duration-200" data-level="3">Level 3</button>
                    <button class="prompt-level-button py-2 px-4 rounded-lg text-indigo-800 font-bold bg-indigo-100 hover:bg-indigo-200 transition duration-200" data-level="4">Level 4</button>
                    <button class="prompt-level-button py-2 px-4 rounded-lg text-indigo-800 font-bold bg-indigo-100 hover:bg-indigo-200 transition duration-200" data-level="5">Level 5</button>
                </div>

                <div id="image-prompt-display" class="bg-white border border-indigo-300 rounded-lg p-4 text-gray-800 text-lg leading-relaxed min-h-[120px] flex flex-col justify-center items-center text-center">
                    <p id="current-image-prompt-text">Level 1: 極簡描述：一隻鹿在森林中。</p>
                    <div id="image-visual-placeholder" class="hidden">
                        <!-- This div is now hidden -->
                    </div>
                </div>
            </div>
        </div>

        <div id="material-consistency" class="section-content bg-white p-8 rounded-xl shadow-lg mb-8"> <!-- 增加區塊內邊距和下方間距 -->
            <h2 class="text-4xl font-bold text-indigo-600 mb-8 flex items-center"> <!-- 增加標題下方間距 -->
                <i data-lucide="copy-check" class="mr-4 w-8 h-8"></i>
                素材一致性
            </h4>
            <h3 class="text-2xl font-semibold text-emerald-600 mb-4">控制要素與Prompt指令方式</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> <!-- 增加網格間距 -->
                <div class="material-consistency-card p-4"> <!-- 增加卡片內邊距 -->
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="user" class="mr-2 w-5 h-5"></i>統一角色外觀</h4>
                    <p class="text-gray-800 leading-relaxed">明確描述人物的年齡、性別、膚色、髮型、眼睛顏色、服裝。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="hair-dryer" class="mr-2 w-5 h-5"></i>固定髮型與膚色</h4>
                    <p class="text-gray-800 leading-relaxed">確保髮型、膚色在所有畫面中一致。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="shirt" class="mr-2 w-5 h-5"></i>服裝與配件</h4>
                    <p class="text-gray-800 leading-relaxed">確保服裝與配件保持一致。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="smile" class="mr-2 w-5 h-5"></i>固定角色表情</h4>
                    <p class="text-gray-800 leading-relaxed">角色應該有相同的表情範圍。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="sun" class="mr-2 w-5 h-5"></i>一致燈光與風格</h4>
                    <p class="text-gray-800 leading-relaxed">確保每個場景的光線與風格一致。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="camera" class="mr-2 w-5 h-5"></i>固定視角與構圖</h4>
                    <p class="text-gray-800 leading-relaxed">指定固定的拍攝角度。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="palette" class="mr-2 w-5 h-5"></i>確保畫風一致</h4>
                    <p class="text-gray-800 leading-relaxed">指定統一的藝術風格。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="droplet" class="mr-2 w-5 h-5"></i>固定色調</h4>
                    <p class="text-gray-800 leading-relaxed">確保所有畫面有相同的色彩風格。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="lightbulb" class="mr-2 w-5 h-5"></i>統一光線</h4>
                    <p class="text-gray-800 leading-relaxed">指定光源與照明風格，避免光線變化過大。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="component" class="mr-2 w-5 h-5"></i>保持材質細節一致</h4>
                    <p class="text-gray-800 leading-relaxed">確保紋理和材質在所有畫面中一致。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="aperture" class="mr-2 w-5 h-5"></i>統一攝影角度</h4>
                    <p class="text-gray-800 leading-relaxed">所有圖片使用相同的拍攝視角與構圖。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="maximize" class="mr-2 w-5 h-5"></i>使用相同解析度</h4>
                    <p class="text-gray-800 leading-relaxed">一致的解析度以確保影像品質統一。</p>
                </div>
                <div class="material-consistency-card p-4">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="map" class="mr-2 w-5 h-5"></i>確保背景環境一致</h4>
                    <p class="text-gray-800 leading-relaxed">確保所有場景背景相同，以增強畫面連貫性。</p>
                </div>
            </div>
        </div>

        <div id="ai-creation-tools" class="section-content bg-white p-8 rounded-xl shadow-lg mb-8">
            <h2 class="text-4xl font-bold text-indigo-600 mb-6 flex items-center">
                <i data-lucide="tool" class="mr-4 w-8 h-8"></i>
                AI創作工具
            </h4>
            <h3 class="text-2xl font-semibold text-emerald-600 mb-4">AI生成式影片相關工具平台</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-gray-100 p-6 rounded-lg shadow-md">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="image" class="mr-2 w-5 h-5"></i>文生圖片</h4>
                    <ul class="list-disc list-inside text-gray-800">
                        <li><a href="https://chat.openai.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">ChatGPT</a></li>
                        <li><a href="https://grok.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Grok</a></li>
                        <li><a href="https://www.bing.com/chat" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Bing</a></li>
                        <li><a href="https://copilot.microsoft.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Copilot</a></li>
                        <li><a href="https://openai.com/dall-e" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">DALL-E</a></li>
                        <li><a href="https://leonardo.ai/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Leonardo.Ai</a></li>
                        <li><a href="https://dreamina.ai/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Dreamina</a></li>
                    </ul>
                </div>
                <div class="bg-gray-100 p-6 rounded-lg shadow-md">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="video" class="mr-2 w-5 h-5"></i>文生影片</h4>
                    <ul class="list-disc list-inside text-gray-800">
                        <li><a href="https://runwayml.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Runway</a></li>
                        <li><a href="https://openai.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Sora</a></li>
                        <li><a href="https://hailuoai.video/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Hailuo AI</a></li>
                        <li><a href="https://luma.ai/dreammachine" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Luma AI</a></li>
                        <li><a href="https://k.ai/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">KLING</a></li>
                    </ul>
                </div>
                <div class="bg-gray-100 p-6 rounded-lg shadow-md">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="user" class="mr-2 w-5 h-5"></i>虛擬人</h4>
                    <ul class="list-disc list-inside text-gray-800">
                        <li><a href="https://www.d-id.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">D-ID</a></li>
                        <li><a href="https://www.heygen.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">HeyGen</a></li>
                        <li><a href="https://www.synthesia.io/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Synthesia</a></li>
                    </ul>
                </div>
                <div class="bg-gray-100 p-6 rounded-lg shadow-md">
                    <h4 class="text-xl font-bold text-indigo-600 mb-2 flex items-center"><i data-lucide="edit" class="mr-2 w-5 h-5"></i>編輯工具</h4>
                    <ul class="list-disc list-inside text-gray-800">
                        <li><a href="https://suno.ai/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Suno</a></li>
                        <li><a href="https://ttsmaker.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">TTSMAKER</a></li>
                        <li><a href="https://www.canva.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Canva</a></li>
                        <li><a href="https://clipchamp.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">Clipchamp</a></li>
                        <li><a href="https://www.flexclip.com/" target="_blank" rel="noopener noreferrer" class="text-indigo-600 hover:underline">剪映</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="ai-prompt-generator" class="section-content bg-white p-8 rounded-xl shadow-lg mb-8">
            <h2 class="text-4xl font-bold text-indigo-600 mb-6 flex items-center">
                <i data-lucide="wand" class="mr-4 w-8 h-8"></i>
                AI Prompt生成器
            </h4>
            <p class="text-gray-800 text-lg leading-relaxed mb-6">
                可參考「攝影與風格詞彙指南」網站，提供完整的鏡頭結構詞與風格結構詞參考，讓創作更具專業水準。該指南包含基本構圖、角度技巧、視角技巧、動態技巧和技術控制。
            </p>

            <!-- Prompt Generator Selection Buttons -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <button id="select-text-prompt" class="prompt-button w-full py-4 px-6 rounded-xl text-white font-bold text-lg flex items-center justify-center transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300">
                    <i data-lucide="file-text" class="mr-3"></i>
                    文生腳本Prompt生成器
                </button>
                <button id="select-image-prompt" class="prompt-button w-full py-4 px-6 rounded-xl text-white font-bold text-lg flex items-center justify-center transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300">
                    <i data-lucide="image" class="mr-3"></i>
                    文生圖片Prompt生成器
                </button>
                <button id="select-video-prompt" class="prompt-button w-full py-4 px-6 rounded-xl text-white font-bold text-lg flex items-center justify-center transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300">
                    <i data-lucide="video" class="mr-3"></i>
                    文生影片Prompt生成器
                </button>
            </div>

            <!-- Generator Form Container -->
            <div id="generator-form-container" class="bg-gray-100 rounded-xl shadow-md p-6 mb-6">
                <div class="text-center text-gray-700 py-10">
                    <i data-lucide="lightbulb" class="mx-auto mb-4 text-indigo-600" style="width: 48px; height: 48px;"></i>
                    <p class="text-xl font-semibold">請從上方選擇一個生成器來開始！</p>
                    <p class="text-md mt-2">填寫參數，輕鬆生成專業Prompt。</p>
                </div>
            </div>

            <!-- Generate Prompt Button -->
            <button id="generate-prompt-button" class="mt-4 mb-6 w-full py-3 px-6 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 transition duration-300 ease-in-out flex items-center justify-center prompt-button">
                <i data-lucide="sparkles" class="mr-2"></i>
                生成 Prompt
            </button>

            <!-- Generated Prompt Display Area -->
            <div class="bg-gray-100 rounded-xl shadow-md p-6">
                <h3 class="text-2xl font-semibold text-emerald-600 mb-4 flex items-center">
                    <i data-lucide="clipboard-list" class="mr-3 w-6 h-6"></i>
                    您的生成結果
                </h3>
                <div id="generated-prompt-display" class="bg-white border border-indigo-500 rounded-lg p-4 text-gray-800 text-lg leading-relaxed min-h-[100px] flex items-center justify-center text-center whitespace-pre-wrap">
                    <p class="text-gray-700">點擊「生成 Agent Prompt」按鈕來生成您的提示。</p>
                </div>
                <button id="copy-prompt-button" class="mt-4 w-full py-3 px-6 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 transition duration-300 ease-in-out flex items-center justify-center prompt-button">
                    <i data-lucide="copy" class="mr-2"></i>
                    複製 Prompt
                </button>
                <div id="copy-success-message" class="text-emerald-600 font-semibold mt-2 text-center hidden">
                    <i data-lucide="check" class="inline-block mr-1"></i>
                    已成功複製！
                </div>
            </div>
        </div>
    </main>

    <script>
        // 將所有相關的 JavaScript 程式碼包裹在一個 IIFE 中
        (function() {
            // Initialize Lucide Icons
            lucide.createIcons();

            // Moved showSection function definition to the top of the script
            function showSection(id) {
                sections.forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(id).classList.add('active');

                // Ensure navLinks is re-queried to get the latest elements
                const currentNavLinks = document.querySelectorAll('.nav-link'); 
                currentNavLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.section === id) {
                        link.classList.add('active');
                    }
                });

                // Close mobile nav after selection
                if (window.innerWidth < 1024) {
                    topNavigation.classList.remove('open');
                }
            }

            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenuClose = document.getElementById('mobile-menu-close');
            const topNavigation = document.getElementById('top-navigation');
            // Re-query navLinks inside DOMContentLoaded or when needed, not globally at top
            var navLinks; // Changed to var

            const sections = document.querySelectorAll('.section-content');

            // Prompt Generator specific elements
            const selectTextPromptBtn = document.getElementById('select-text-prompt');
            const selectImagePromptBtn = document.getElementById('select-image-prompt');
            const selectVideoPromptBtn = document.getElementById('select-video-prompt');
            const generatorFormContainer = document.getElementById('generator-form-container');
            const generatedPromptDisplay = document.getElementById('generated-prompt-display');
            const copyPromptBtn = document.getElementById('copy-prompt-button');
            const copySuccessMessage = document.getElementById('copy-success-message');
            const generatePromptBtn = document.getElementById('generate-prompt-button');

            // State management for Prompt Generator
            var selectedGenerator = ''; // Changed to var
            var videoParams = { // Changed to var
                topic: '',
                character: '',
                action: '',
                lens: '',
                style: '',
                lighting: '',
                aspectRatio: '',
                resolution: ''
            };
            var imageParams = { // Changed to var
                subject: '',
                style: '',
                composition: '',
                lighting: '',
                colorPalette: '',
                aspectRatio: '',
            };
            var textParams = { // Changed to var
                topic: '',
                audience: '',
                videoLength: '',
                tone: '',
                contentReq1: '',
                contentReq2: '',
                contentReq3: '',
                additionalReq: '',
            };

            // Data for Image Prompt Structure visualization
            var imagePromptLevels = { // Changed to var
                "1": {
                    text: "Level 1: 極簡描述：一隻鹿在森林中。",
                    visual: "簡單的鹿剪影"
                },
                "2": {
                    text: "Level 2: 加入場景元素：一隻梅花鹿在森林中，站在溪水邊。",
                    visual: "鹿在溪邊的簡約風景"
                },
                "3": {
                    text: "Level 3: 加入光影與風格詞：清晨的森林，一隻鹿在森林中，站在溪水邊，陽光灑落在鹿身上，柔和光線，攝影風格。",
                    visual: "晨光下的鹿，有柔和光影"
                },
                "4": {
                    text: "Level 4: 加入構圖與鏡頭語彙：清晨的森林，一隻鹿在森林中，陽光灑落在鹿身上，柔和光線，中景構圖，鹿站在畫面左側，右側有水流反光，仿真攝影風格。",
                    visual: "中景構圖的鹿，畫面左側，有水流反光"
                },
                "5": {
                    text: "Level 5: 加入情緒或敘事元素：清晨的森林，一隻鹿在森林中，陽光灑落在鹿身上，鹿低頭喝水，周圍水珠飛濺，鹿站在畫面左側，右側有水流反光，仿真攝影風格畫面，傳達寧靜與自然生機感，高解析度、16:9 橫向比例。",
                    visual: "鹿低頭喝水，水珠飛濺，寧靜與自然生機感"
                }
            };

            // Elements for Image Prompt visualization
            // These are queried globally, but their event listeners are attached in DOMContentLoaded
            const promptLevelButtons = document.querySelectorAll('.prompt-level-button');
            const currentImagePromptText = document.getElementById('current-image-prompt-text');
            const imageVisualPlaceholder = document.getElementById('image-visual-placeholder');

            // Function to update image prompt display
            function updateImagePromptDisplay(level) {
                const data = imagePromptLevels[level];
                currentImagePromptText.innerText = data.text;
                // imageVisualPlaceholder.innerText = data.visual; // Removed as per user request
            }

            // Elements for Prompt Structure tabs (now interactive cards)
            const promptStructureCards = document.querySelectorAll('.prompt-structure-card');
            // const selectedPromptStructureDisplay = document.getElementById('selected-prompt-structure-display'); // This element is now removed from HTML

            // Data for Prompt Structure Cards
            const promptStructureData = {
                "video-script": {
                    title: "影片腳本Prompt",
                    content: `
                        <h4 class="text-xl font-bold text-indigo-600 mb-2">影片腳本Prompt</h4>
                        <ul class="list-disc list-inside text-gray-800 space-y-1">
                            <li>結構: 對象+語氣+格式+段落內容。</li>
                            <li>範例: 「請用口語化且易懂的語氣，撰寫一段50秒衛教影片腳本，主題是「什麼是羊膜穿刺」，對象為第一次懷孕的準媽媽，語氣溫柔且安心，腳本分成三段：1. 簡單說明什麼是羊膜穿刺 2.為什麼需要做？風險是什麼？3. 鼓勵媽媽與醫師討論，安心決定」。</li>
                        </ul>
                    `
                },
                "image-gen": {
                    title: "分鏡圖像生成Prompt",
                    content: `
                        <h4 class="text-xl font-bold text-indigo-600 mb-2">分鏡圖像生成Prompt</h4>
                        <ul class="list-disc list-inside text-gray-800 space-y-1">
                            <li>結構: 主角+動作+場景+風格+用途。</li>
                            <li>範例: 「請根據下列腳本內容製作一張影片分鏡腳本表格，每格包含畫面描述(可用來生成AI圖片)、鏡頭類型、人物/場景動作，並標註對應旁白內容。」。</li>
                        </ul>
                    `
                },
                "narration": {
                    title: "旁白生成Prompt",
                    content: `
                        <h4 class="text-xl font-bold text-indigo-600 mb-2">旁白生成Prompt</h4>
                        <ul class="list-disc list-inside text-gray-800 space-y-1">
                            <li>結構: 語氣+長度+對應畫面+內容主題。</li>
                            <li>範例: 「請根據以下影片腳本與分鏡內容撰寫旁白，每段旁白對應一格畫面，語氣溫柔安撫，每段約15-25秒。」。</li>
                        </ul>
                    `
                }
            };

            // Function to update selected prompt structure display
            function updatePromptStructureDisplay(type) {
                // This function is now empty as the display area is removed.
                // The cards themselves will still toggle active state.
            }

            /**
             * Creates HTML for a Select input.
             * @param {string} label - The label text.
             * @param {string} value - The current selected value.
             * @param {Array<Object>} options - Array of options [{ value, label }].
             * @param {string} iconName - Name of the Lucide Icon.
             * @param {function} onChangeHandler - The change event handler function.
             * @returns {string} HTML string.
             */
            function createSelectInputHtml(label, value, options, iconName, onChangeHandler) {
                // Ensure options is an array, default to empty array if not
                const safeOptions = Array.isArray(options) ? options : [];
                const optionsHtml = safeOptions.map(option => `<option value="${option.value}" ${option.value === value ? 'selected' : ''}>${option.label}</option>`).join('');
                return `
                    <div class="mb-4">
                        <label class="block text-gray-800 text-sm font-semibold mb-2 flex items-center">
                            <i data-lucide="${iconName}" class="mr-2 text-indigo-600" style="width: 16px; height: 16px;"></i>
                            ${label}
                        </label>
                        <select
                            class="block w-full px-4 py-2 border border-indigo-500 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent bg-white text-gray-800 transition duration-200 ease-in-out hover:border-indigo-400"
                            data-onchange-param="${label}"
                        >
                            ${optionsHtml}
                        </select>
                    </div>
                `;
            }

            /**
             * Creates HTML for a Text input.
             * @param {string} label - The label text.
             * @param {string} value - The current input value.
             * @param {string} placeholder - The placeholder text.
             * @param {string} iconName - Name of the Lucide Icon.
             * @param {function} onChangeHandler - The change event handler function.
             * @returns {string} HTML HTML.
             */
            function createTextInputHtml(label, value, placeholder, iconName, onChangeHandler) {
                return `
                    <div class="mb-4">
                        <label class="block text-gray-800 text-sm font-semibold mb-2 flex items-center">
                            <i data-lucide="${iconName}" class="mr-2 text-indigo-600" style="width: 16px; height: 16px;"></i>
                            ${label}
                        </label>
                        <input
                            type="text"
                            value="${value}"
                            placeholder="${placeholder}"
                            class="block w-full px-4 py-2 border border-indigo-500 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent bg-white text-gray-800 transition duration-200 ease-in-out hover:border-indigo-400"
                            data-onchange-param="${label}"
                        />
                    </div>
                `;
            }

            /**
             * Creates HTML for a Textarea input.
             * @param {string} label - The label text.
             * @param {string} value - The current input value.
             * @param {string} placeholder - The placeholder text.
             * @param {number} rows - Number of rows for the textarea.
             * @param {string} iconName - Name of the Lucide Icon.
             * @param {function} onChangeHandler - The change event handler function.
             * @returns {string} HTML string.
             */
            function createTextareaHtml(label, value, placeholder, rows, iconName, onChangeHandler) {
                return `
                    <div class="mb-4">
                        <label class="block text-gray-800 text-sm font-semibold mb-2 flex items-center">
                            <i data-lucide="${iconName}" class="mr-2 text-indigo-600" style="width: 16px; height: 16px;"></i>
                            ${label}
                        </label>
                        <textarea
                            rows="${rows}"
                            class="block w-full px-4 py-2 border border-indigo-500 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent bg-white text-gray-800 transition duration-200 ease-in-out hover:border-indigo-400"
                            data-onchange-param="${label}"
                        >${value}</textarea>
                    </div>
                `;
            }


            /**
             * Handles video parameter changes.
             * @param {string} paramName - The name of the parameter.
             * @param {string} value - The new value.
             */
            function handleVideoParamChange(paramName, value) {
                // Map label to actual parameter name for videoParams
                let actualParamName;
                switch (paramName) {
                    case '主題': actualParamName = 'topic'; break;
                    case '角色設定': actualParamName = 'character'; break;
                    case '動作劇情': actualParamName = 'action'; break;
                    case '鏡頭語言': actualParamName = 'lens'; break;
                    case '風格與美術': actualParamName = 'style'; break;
                    case '光線氣氛': actualParamName = 'lighting'; break;
                    case '影片比例': actualParamName = 'aspectRatio'; break;
                    case '影片解析度': actualParamName = 'resolution'; break;
                    default: actualParamName = paramName;
                }
                videoParams = { ...videoParams, [actualParamName]: value };
            }

            /**
             * Handles image parameter changes.
             * @param {string} paramName - The name of the parameter.
             * @param {string} value - The new value.
             */
            function handleImageParamChange(paramName, value) {
                // Map label to actual parameter name for imageParams
                let actualParamName;
                switch (paramName) {
                    case '主題': actualParamName = 'subject'; break;
                    case '風格': actualParamName = 'style'; break;
                    case '構圖': actualParamName = 'composition'; break;
                    case '光線效果': actualParamName = 'lighting'; break;
                    case '色彩調性': actualParamName = 'colorPalette'; break;
                    case '圖片比例': actualParamName = 'aspectRatio'; break;
                    default: actualParamName = paramName;
                }
                imageParams = { ...imageParams, [actualParamName]: value };
            }

            /**
             * Handles text parameter changes.
             * @param {string} paramName - The name of the parameter.
             * @param {string} value - The new value.
             */
            function handleTextParamChange(paramName, value) {
                // Map label to actual parameter name for textParams
                let actualParamName;
                switch (paramName) {
                    case '主題': actualParamName = 'topic'; break;
                    case '目標觀眾': actualParamName = 'audience'; break;
                    case '影片長度 (秒)': actualParamName = 'videoLength'; break;
                    case '語氣風格': actualParamName = 'tone'; break;
                    case '內容要求 1': actualParamName = 'contentReq1'; break;
                    case '內容要求 2': actualParamName = 'contentReq2'; break;
                    case '內容要求 3': actualParamName = 'contentReq3'; break;
                    case '額外要求': actualParamName = 'additionalReq'; break;
                    default: actualParamName = paramName;
                }
                textParams = { ...textParams, [actualParamName]: value };
            }

            /**
             * Renders the video prompt generator form.
             */
            function renderVideoPromptGenerator() {
                generatorFormContainer.innerHTML = `
                    <h3 class="text-2xl font-semibold text-emerald-600 mb-6 flex items-center">
                        <i data-lucide="video" class="mr-3" style="width: 24px; height: 24px;"></i>
                        文生影片Prompt生成器
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${createTextInputHtml('主題', videoParams.topic, '描述影片的主要情境或故事', 'target', handleVideoParamChange)}
                        ${createTextInputHtml('角色設定', videoParams.character, '人物的外觀、年齡、服裝、個性等', 'user', handleVideoParamChange)}
                        ${createTextInputHtml('動作劇情', videoParams.action, '發生了什麼事？有何動作轉折？', 'film', handleVideoParamChange)}
                        ${createSelectInputHtml('鏡頭語言', videoParams.lens, [
                            { value: '', label: '不選擇' },
                            { value: '廣角', label: '廣角' },
                            { value: '中景', label: '中景' },
                            { value: '特寫', label: '特寫' },
                            { value: '慢動作', label: '慢動作' },
                            { value: '平移', label: '平移' },
                            { value: '俯瞰', label: '俯瞰' },
                            { value: '推軌', label: '推軌' },
                            { value: '搖攝', label: '搖攝' },
                            { value: '主角視角', label: '主角視角' },
                        ], 'camera', handleVideoParamChange)}
                        ${createSelectInputHtml('風格與美術', videoParams.style, [
                            { value: '', label: '不選擇' },
                            { value: '卡通風', label: '卡通風' },
                            { value: '寫實風', label: '寫實風' },
                            { value: '皮克斯風', label: '皮克斯風' },
                            { value: '未來感', label: '未來感' },
                            { value: '電影感', label: '電影感' },
                            { value: '動畫', label: '動畫' },
                            { value: '夢幻感', label: '夢幻感' },
                            { value: '奇幻感', label: '奇幻感' },
                            { value: '超現實', label: '超現實' },
                        ], 'palette', handleVideoParamChange)}
                        ${createSelectInputHtml('光線氣氛', videoParams.lighting, [
                            { value: '', label: '不選擇' },
                            { value: '自然光', label: '自然光' },
                            { value: '戲劇光', label: '戲劇光' },
                            { value: '柔光', label: '柔光' },
                            { value: '冷色調', label: '冷色調' },
                            { value: '溫暖色調', label: '溫暖色調' },
                        ], 'sun', handleVideoParamChange)}
                        ${createSelectInputHtml('影片比例', videoParams.aspectRatio, [
                            { value: '', label: '不選擇' },
                            { value: '16:9', label: '16:9' },
                            { value: '9:16', label: '9:16' },
                            { value: '1:1', label: '1:1' },
                            { value: '4:3', label: '4:3' },
                        ], 'crop', handleVideoParamChange)}
                        ${createSelectInputHtml('影片解析度', videoParams.resolution, [
                            { value: '', label: '不選擇' },
                            { value: '720p', label: '720p' },
                            { value: '1080p', label: '1080p' },
                            { value: '4K', label: '4K' },
                            { value: '8K', label: '8K' },
                        ], 'maximize', handleVideoParamChange)}
                    </div>
                `;
                // Re-initialize Lucide Icons
                lucide.createIcons();
                // Re-bind event listeners
                attachInputEventListeners();
                // Reset result display area to hint text
                generatedPromptDisplay.innerHTML = `<p class="text-gray-700">點擊「生成 Prompt」按鈕來生成您的提示。</p>`;
            }

            /**
             * Renders the image prompt generator form.
             */
            function renderImagePromptGenerator() {
                generatorFormContainer.innerHTML = `
                    <h3 class="text-2xl font-semibold text-emerald-600 mb-6 flex items-center">
                        <i data-lucide="image" class="mr-3" style="width: 24px; height: 24px;"></i>
                        文生圖片Prompt生成器
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${createTextInputHtml('主題', imageParams.subject, '請描述圖中要出現的主角或場景', 'pen-tool', handleImageParamChange)}
                        ${createSelectInputHtml('風格', imageParams.style, [
                            { value: '', label: '不選擇' },
                            { value: '寫實', label: '寫實' },
                            { value: '卡通', label: '卡通' },
                            { value: '油畫', label: '油畫' },
                            { value: '像素風', label: '像素風' },
                            { value: '賽博龐克', label: '賽博龐克' },
                            { value: '日系動漫', label: '日系動漫' },
                            { value: '3D動畫', label: '3D動畫' },
                        ], 'palette', handleImageParamChange)}
                        ${createSelectInputHtml('構圖', imageParams.composition, [
                            { value: '', label: '不選擇' },
                            { value: '特寫', label: '特寫' },
                            { value: '中景', label: '中景' },
                            { value: '遠景', label: '遠景' },
                            { value: '鳥瞰', label: '鳥瞰' },
                            { value: '中心構圖', label: '中心構圖' },
                        ], 'square', handleImageParamChange)}
                        ${createSelectInputHtml('光線效果', imageParams.lighting, [
                            { value: '', label: '不選擇' },
                            { value: '自然光', label: '自然光' },
                            { value: '逆光', label: '逆光' },
                            { value: '柔光', label: '柔光' },
                            { value: '戲劇光', label: '戲劇光' },
                            { value: '強烈對比', label: '強烈對比' },
                        ], 'sun', handleImageParamChange)}
                        ${createSelectInputHtml('色彩調性', imageParams.colorPalette, [
                            { value: '', label: '不選擇' },
                            { value: '鮮豔', label: '鮮豔' },
                            { value: '柔和莫蘭迪', label: '柔和莫蘭迪' },
                            { value: '冷色系', label: '冷色系' },
                            { value: '黑白', label: '黑白' },
                            { value: '暖色系', label: '暖色系' },
                        ], 'droplet', handleImageParamChange)}
                        ${createSelectInputHtml('圖片比例', imageParams.aspectRatio, [
                            { value: '', label: '不選擇' },
                            { value: '16:9', label: '16:9' },
                            { value: '1:1', label: '1:1' },
                            { value: '4:3', label: '4:3' },
                            { value: '9:16', label: '9:16' },
                        ], 'crop', handleImageParamChange)}
                    </div>
                `;
                // Re-initialize Lucide Icons
                lucide.createIcons();
                // Re-bind event listeners
                attachInputEventListeners();
                // Reset result display area to hint text
                generatedPromptDisplay.innerHTML = `<p class="text-gray-700">點擊「生成 Prompt」按鈕來生成您的提示。</p>`;
            }

            /**
             * Renders the text prompt generator form.
             */
            function renderTextPromptGenerator() {
                generatorFormContainer.innerHTML = `
                    <h3 class="text-2xl font-semibold text-emerald-600 mb-6 flex items-center">
                        <i data-lucide="file-text" class="mr-3" style="width: 24px; height: 24px;"></i>
                        文生腳本Prompt生成器
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${createTextInputHtml('主題', textParams.topic, '例如：什麼是羊膜穿刺', 'book-open', handleTextParamChange)}
                        ${createTextInputHtml('目標觀眾', textParams.audience, '例如：第一次懷孕的準媽媽', 'users', handleTextParamChange)}
                        ${createTextInputHtml('影片長度 (秒)', textParams.videoLength, '例如：50', 'clock', handleTextParamChange)}
                        ${createSelectInputHtml('語氣風格', textParams.tone, [
                            { value: '', label: '不選擇' },
                            { value: '專業', label: '專業' },
                            { value: '活潑', label: '活潑' },
                            { value: '感性', label: '感性' },
                            { value: '溫柔且安心', label: '溫柔且安心' },
                            { value: '口語化且易懂', label: '口語化且易懂' },
                        ], 'mic', handleTextParamChange)}
                        <div class="md:col-span-2">
                            <label class="block text-gray-800 text-sm font-semibold mb-2 flex items-center">
                                <i data-lucide="list-ordered" class="mr-2 text-indigo-600" style="width: 16px; height: 16px;"></i>
                                內容要求 (請包含以下重點，每行一個)
                            </label>
                            ${createTextInputHtml('內容要求 1', textParams.contentReq1, '例如：簡單說明什麼是羊膜穿刺', 'list-checks', handleTextParamChange)}
                            ${createTextInputHtml('內容要求 2', textParams.contentReq2, '例如：為什麼需要做？風險是什麼？', 'list-checks', handleTextParamChange)}
                            ${createTextInputHtml('內容要求 3', textParams.contentReq3, '例如：鼓勵媽媽與醫師討論，安心決定', 'list-checks', handleTextParamChange)}
                        </div>
                        <div class="md:col-span-2">
                            ${createTextareaHtml('額外要求', textParams.additionalReq, '例如：加入一句口號、設計分鏡、口白與旁白分開', 3, 'plus-circle', handleTextParamChange)}
                        </div>
                    </div>
                `;
                // Re-initialize Lucide Icons
                lucide.createIcons();
                // Re-bind event listeners
                attachInputEventListeners();
                // Reset result display area to hint text
                generatedPromptDisplay.innerHTML = `<p class="text-gray-700">點擊「生成 Prompt」按鈕來生成您的提示。</p>`;
            }

            /**
             * Renders the appropriate generator form based on the selected type.
             */
            function renderSelectedGenerator() {
                if (selectedGenerator === 'video') {
                    renderVideoPromptGenerator();
                } else if (selectedGenerator === 'image') {
                    renderImagePromptGenerator();
                } else if (selectedGenerator === 'text') {
                    renderTextPromptGenerator();
                } else {
                    // Initial state or when no generator is selected
                    generatorFormContainer.innerHTML = `
                        <div class="text-center text-gray-700 py-10">
                            <i data-lucide="lightbulb" class="mx-auto mb-4 text-indigo-600" style="width: 48px; height: 48px;"></i>
                            <p class="text-xl font-semibold">請從上方選擇一個生成器來開始！</p>
                            <p class="text-md mt-2">填寫參數，輕鬆生成專業Prompt。</p>
                        </div>
                    `;
                    lucide.createIcons();
                    generatedPromptDisplay.innerHTML = `<p class="text-gray-700">點擊「生成 Prompt」按鈕來生成您的提示。</p>`;
                }
            }

            /**
             * Attaches event listeners to input elements within the generator form.
             * This is necessary because form content is dynamically rendered.
             */
            function attachInputEventListeners() {
                const inputs = generatorFormContainer.querySelectorAll('select, input[type="text"], textarea');
                inputs.forEach(input => {
                    const paramName = input.dataset.param;
                    let handler;

                    // Determine the correct handler based on the selected generator
                    if (selectedGenerator === 'video') {
                        handler = handleVideoParamChange;
                    } else if (selectedGenerator === 'image') {
                        handler = handleImageParamChange;
                    } else if (selectedGenerator === 'text') {
                        handler = handleTextParamChange;
                    }

                    if (handler) {
                        // Remove old listeners to prevent duplicate bindings
                        if (input._currentHandler) {
                            input.removeEventListener('change', input._currentHandler);
                            input.removeEventListener('input', input._currentHandler);
                        }

                        const newHandler = (e) => {
                            handler(paramName, e.target.value);
                        };

                        // Use 'change' event for select elements, 'input' event for text inputs and textareas
                        if (input.tagName === 'SELECT') {
                            input.addEventListener('change', newHandler);
                        } else {
                            input.addEventListener('input', newHandler);
                        }
                        input._currentHandler = newHandler; // Store current handler to allow removal
                    }
                });
            }

            // Event listeners for Prompt Generator selection buttons
            selectTextPromptBtn.addEventListener('click', () => {
                selectedGenerator = 'text';
                renderSelectedGenerator();
            });
            selectImagePromptBtn.addEventListener('click', () => {
                selectedGenerator = 'image';
                renderSelectedGenerator();
            });
            selectVideoPromptBtn.addEventListener('click', () => {
                selectedGenerator = 'video';
                renderSelectedGenerator();
            });

            // Event listener: Generate Prompt
            generatePromptBtn.addEventListener('click', () => {
                generateAndDisplayPrompt();
            });

            // Event listener: Copy Prompt
            copyPromptBtn.addEventListener('click', () => {
                const textToCopy = generatedPromptDisplay.innerText;
                // Create a temporary textarea element
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    copySuccessMessage.classList.remove('hidden');
                    setTimeout(() => {
                        copySuccessMessage.classList.add('hidden');
                    }, 2000); // Hide success message after 2 seconds
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                    // You can add a custom error message box here instead of alert()
                }
                document.body.removeChild(textArea); // Remove temporary element
            });


            // Data for Image Prompt Structure visualization
            // This is now declared inside the IIFE or where needed.
            // const imagePromptLevels = { ... };

            // Elements for Image Prompt visualization
            // These are queried globally, but their event listeners are attached in DOMContentLoaded
            // const promptLevelButtons = document.querySelectorAll('.prompt-level-button');
            // const currentImagePromptText = document.getElementById('current-image-prompt-text');
            // const imageVisualPlaceholder = document.getElementById('image-visual-placeholder');

            // Function to update image prompt display
            // function updateImagePromptDisplay(level) { ... }

            // Event listeners for image prompt level buttons
            // These are attached in DOMContentLoaded
            // promptLevelButtons.forEach(button => { ... });

            // Initialize image prompt display with Level 1
            // updateImagePromptDisplay('1'); // This will be called in DOMContentLoaded

            // Elements for Prompt Structure tabs (now interactive cards)
            // const promptStructureCards = document.querySelectorAll('.prompt-structure-card');
            // const selectedPromptStructureDisplay = document.getElementById('selected-prompt-structure-display'); // This element is now removed from HTML

            // Data for Prompt Structure Cards
            // const promptStructureData = { ... };

            // Function to update selected prompt structure display
            // function updatePromptStructureDisplay(type) { ... }

            // Event listeners for prompt structure cards
            // These are attached in DOMContentLoaded
            // promptStructureCards.forEach(card => { ... });


            // Initialize on page load
            document.addEventListener('DOMContentLoaded', () => {
                navLinks = document.querySelectorAll('.nav-link'); // Ensure navLinks is populated here

                // Re-attach event listeners for navLinks
                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = link.dataset.section;
                        showSection(targetId);
                    });
                });

                // Mobile menu toggle
                mobileMenuToggle.addEventListener('click', () => {
                    topNavigation.classList.add('open');
                });

                mobileMenuClose.addEventListener('click', () => {
                    topNavigation.classList.remove('open');
                });

                // Attach event listeners for image prompt level buttons
                promptLevelButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        // Remove active class from all buttons
                        promptLevelButtons.forEach(btn => btn.classList.remove('active-level', 'bg-indigo-600'));
                        // Add active class to clicked button
                        button.classList.add('active-level', 'bg-indigo-600');
                        const level = button.dataset.level;
                        updateImagePromptDisplay(level);
                    });
                });

                // Initialize image prompt display with Level 1
                updateImagePromptDisplay('1');

                // Attach event listeners for prompt structure cards
                promptStructureCards.forEach(card => {
                    card.addEventListener('click', () => {
                        // Remove active class from all cards
                        promptStructureCards.forEach(c => c.classList.remove('active-card'));
                        // Add active class to clicked card
                        card.classList.add('active-card');
                        // The content display logic is removed as per user request.
                    });
                });

                // Initial render of the default generator form
                renderSelectedGenerator();

                showSection('welcome'); // Show welcome section by default
            });

            // Ensure Lucide Icons are rendered correctly after dynamic content loading
            window.onload = function() {
                lucide.createIcons();
            };
        })(); // End of IIFE
    </script>
</body>
</html>
